/*
 * Copyright 2007 Marc Kramis
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *     http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * 
 * $Id: JSCSIDeviceTest.java 2641 2007-04-10 09:46:28Z lemke $
 * 
 */

package org.jscsi;

import static org.junit.Assert.assertEquals;

import java.util.Random;

import org.junit.AfterClass;
import org.junit.BeforeClass;
import org.junit.Test;

public class WriteBufferDeviceTest {

  private static final String TARGET_NAME = "titan04";

  private static Device device;

  /** Number of Blocks to read */
  private static final int TEST_DATA_SIZE = 100;

  /* Byte arrays (for all blocksizes) which are written to the targets. */
  private final byte[] testDataBlock8kb;

  private final byte[] testDataBlock16kb;

  private final byte[] testDataBlock32kb;

  private final byte[] testDataBlock64kb;

  private final byte[] testDataBlock128kb;

  private final byte[] emptyArray8kb = new byte[8 * 1024];

  private final byte[] emptyArray16kb = new byte[16 * 1024];

  private final byte[] emptyArray32kb = new byte[32 * 1024];

  private final byte[] emptyArray64kb = new byte[64 * 1024];

  private final byte[] emptyArray128kb = new byte[128 * 1024];

  Random randomGenerator;

  // ---------------------------------------------------------------------------
  // ---------------------------------------------------------------------------

  int[] randomSequence8kb = { 1579456, 501840, 1359744, 1579616, 144896,
      309328, 576256, 870208, 596192, 561456, 1863056, 1355552, 1673888,
      1836416, 7584, 1961312, 1936544, 1207776, 416688, 1571840, 905680,
      440864, 1135376, 1363056, 1946704, 1455136, 1443808, 1327552, 667776,
      1469280, 1084752, 1549552, 1291056, 1416768, 404160, 127568, 1944224,
      728656, 1323200, 1030848, 731296, 1268352, 966848, 449104, 560768,
      412368, 1525232, 654432, 914800, 1330336, 1055648, 34656, 1538128,
      1620880, 404848, 1638976, 1315328, 1212576, 1942496, 902976, 423344,
      518704, 811040, 841328, 920304, 1110928, 1917040, 964784, 338992, 401568,
      919888, 960960, 1319984, 902400, 941600, 45536, 1872880, 391728, 1849648,
      598800, 632192, 1866256, 206624, 1057152, 1195824, 709360, 1749984,
      257872, 476112, 605488, 949552, 1861504, 1663136, 1966176, 567024,
      179168, 649120, 1224144, 822912, 1955552, 1788304, 171872, 504848,
      1323056, 637920, 978800, 1411632, 205616, 1373776, 1681344, 274272,
      1549248, 824592, 8448, 647072, 1006000, 4608, 1240112, 1274176, 95408,
      1549792, 1295952, 1429152, 713264, 216320, 33024, 1182352, 1920368,
      880096, 1695296, 1503120, 1908032, 1688352, 35296, 672960, 1060240,
      372976, 354624, 847664, 1866288, 1857376, 62384, 197008, 1558256,
      1426864, 1121424, 1406912, 970704, 535920, 557600, 242656, 1735088,
      1945264, 436944, 861040, 286272, 1337728, 140656, 362688, 568512,
      1712608, 194752, 754592, 419680, 263568, 1569552, 290912, 1863360,
      1227328, 1597920, 1835024, 318528, 1412368, 1770576, 1568416, 72048,
      870080, 1932256, 1034832, 1446560, 1456192, 1826912, 1435248, 1304320,
      1579120, 889808, 1422784, 1093968, 151648, 159120, 758368, 1821904,
      784272, 1685472, 1846080, 484608, 1657328, 888672, 1550448, 1433872,
      267680, 1528752, 151712, 927232, 701232, 658912, 1108368, 1388976,
      915968, 970656, 1888768, 1548816, 910832, 563520, 710192, 848192, 836032,
      58608, 526352, 565040, 1251680, 177264, 240192, 1338176, 1499248, 992832,
      1966896, 549104, 815616, 1014800, 1780288, 1158112, 1010208, 1902576,
      1767664, 1012256, 1766512, 423008, 561664, 1927872, 50576, 639584,
      1329376, 1765264, 166640, 946800, 354128, 1644672, 474224, 66400,
      1631040, 538816, 447968, 1565808, 723360, 1848128, 1724576, 1190016,
      1824352, 1650096, 1809168, 1408304, 682080, 1760272, 146208, 902928,
      863952, 478560, 164448, 805392, 635472, 648368, 1204960, 1196496, 676160,
      904544, 1523504, 611856, 562768, 291824, 982864, 1089376, 1914672,
      184624, 1480880, 277952, 946528, 1375712, 197584, 688848, 23584, 1674320,
      351504, 522032, 1877040, 475808, 244752, 1869392, 887440, 580240,
      1751088, 1665200, 543936, 1175008, 1176256, 1478912, 1759952, 1693712,
      1373760, 1852560, 614960, 1099296, 759408, 1146704, 107344, 1024752,
      582048, 1057552, 1282176, 1558608, 367664, 1155744, 1692704, 55248,
      1707440, 1666416, 465840, 836016, 730064, 1666432, 1042480, 1091968,
      1067200, 199952, 1473760, 1744720, 1928016, 489248, 1250848, 1271216,
      662352, 603040, 729328, 444416, 1632848, 1249008, 1066064, 867648,
      1005072, 1470816, 1460336, 1837360, 1616896, 1565024, 148560, 1094560,
      1286736, 170032, 1292448, 1772592, 1821536, 1759392, 1869472, 728048,
      1455776, 1150016, 1132112, 1034208, 342048, 1420752, 711024, 1956880,
      1773968, 1830528, 941872, 922096, 885984, 1898208, 1449568, 1706672,
      1207600, 1386560, 1830896, 1889456, 1974352, 1459232, 1173744, 58640,
      1559504, 231312, 193856, 501584, 1035776, 555696, 560800, 1545120,
      1319184, 1326832, 5136, 294080, 77552, 41760, 1398800, 1331360, 506464,
      33968, 86688, 594256, 626704, 756624, 1658800, 1760320, 805872, 1801424,
      1614608, 856576, 1347264, 1147792, 803168, 331360, 605296, 744768,
      1539616, 642448, 912864, 1470976, 708432, 785328, 1646880, 1420912,
      1947728, 672720, 722768, 277120, 44848, 1205760, 1548272, 802512,
      1563184, 291344, 48352, 381616, 159904, 1477840, 519136, 985344, 1851728,
      865104, 552544, 1356720, 1769744, 783104, 1755920, 1641808, 733312,
      1456816, 821504, 1690560, 1909536, 658016, 952336, 1547568, 1034432,
      1150032, 447280, 430464, 1801840, 1125520, 334112, 972560, 606368,
      1592944, 393904, 277248, 935168, 1248256, 1172288, 1013904, 1149888,
      252832, 1330672, 1792576, 1243056, 137008, 1151360, 703552, 790288,
      225904, 1261328, 142160, 668848, 1828304, 1724288, 475344, 397984, 30400,
      1291824, 1027344, 1040848, 884704, 1305376, 1703392, 1474912, 194384,
      1292368, 521920, 760864, 744080, 526336, 1855008, 908000, 1776144,
      1580336, 544336, 726496, 724592, 806736, 1825808, 280096, 38288, 1316320,
      99776, 911760, 1839504, 1370976, 564992, 125216, 873616, 409744, 617088,
      1873616, 1643712, 572752, 376112, 449040, 750016, 33296, 58032, 537680,
      1016560, 671008, 1890752, 71424, 415840, 1683120, 892096, 1771968,
      179184, 1330672, 617888, 107824, 1894448, 1394992, 676192, 227744,
      1181392, 150512, 346096, 60432, 1655920, 1957472, 1919456, 242160, 12400,
      566112, 1703328, 28832, 256704, 699840, 744000, 1910304, 787520, 924272,
      869984, 531760, 460224, 824224, 1170624, 607664, 1698704, 1564032,
      1098816, 1191344, 245776, 52800, 1537280, 1066288, 223200, 1260224,
      1059440, 1646800, 1146016, 1693984, 1398640, 271840, 961312, 1759472,
      214256, 1377040, 352240, 666992, 491824, 1559216, 1182704, 486448,
      1278336, 1012912, 910928, 1144656, 1216304, 663664, 1549408, 764176,
      1709872, 59264, 1200208, 1563568, 1501856, 1035488, 781280, 135520,
      1882112, 1781024, 366720, 940448, 572160, 561136, 338880, 923904, 85424,
      1924000, 474896, 86784, 1695328, 1113856, 1878688, 309216, 283584,
      205152, 1445232, 1889680, 589408, 878960, 838896, 1895712, 1262288,
      214896, 350256, 255296, 721056, 1646000, 1562880, 543072, 169584,
      1399728, 1056368, 1618064, 1212592, 903456, 1092960, 1908112, 1701536,
      1672928, 758160, 1183120, 1657120, 906560, 1387856, 773888, 1016448,
      1751712, 70272, 695168, 944944, 1564336, 923488, 1203616, 1750208,
      1661664, 1050784, 1167968, 1037248, 451456, 343888, 589968, 1184672,
      1889488, 1761776, 1244848, 1593952, 794528, 1188384, 1798016, 1147792,
      1766688, 197504, 1939856, 1327088, 1216256, 260736, 1842688, 946800,
      1399712, 1102608, 1370912, 406752, 913504, 1225856, 266752, 1574016,
      1891008, 564928, 499920, 745744, 361312, 1526688, 995888, 1694384,
      307344, 582544, 387712, 342032, 826224, 1862816, 62752, 1185168, 127520,
      1769024, 1675520, 685024, 1640240, 1339952, 757968, 1922896, 417792,
      1701744, 1624752, 1741856, 1755568, 1614976, 1436480, 742944, 1308064,
      1441392, 523888, 1946928, 1770544, 1486816, 361328, 1416224, 1949776,
      781248, 193888, 1215408, 1556320, 137184, 1794016, 170128, 1558688,
      147664, 1600288, 702688, 1458128, 31056, 1514496, 1599616, 1406000,
      707952, 535344, 1727424, 1165888, 223616, 68768, 553632, 122848, 1912368,
      326768, 559872, 348464, 464864, 501648, 1470496, 231408, 141408, 408240,
      1427856, 1312560, 1075424, 461728, 1871184, 866224, 1826640, 1680176,
      1706112, 1486576, 1843184, 723888, 1884464, 154128, 1138528, 1887168,
      939152, 1242896, 1052736, 1398176, 1530640, 838224, 949888, 1839456,
      1133024, 541360, 1765584, 401408, 1157136, 178592, 1326000, 1187312,
      1125968, 79536, 818720, 674464, 209184, 78288, 1693616, 738752, 1696064,
      884592, 1932112, 717712, 1214128, 1500608, 1863120, 642720, 897712,
      73952, 1909168, 966080, 1077328, 351024, 1750336, 1693568, 1416240,
      1029744, 662944, 348512, 1725840, 170128, 521536, 858432, 1177248,
      106448, 65824, 1390592, 1167280, 1591376, 1184640, 1814704, 369056,
      1842800, 1099440, 429584, 10784, 1021504, 1072288, 150080, 946304,
      1767648, 727456, 966960, 1823440, 1243840, 1169632, 106544, 1492240,
      1010176, 1527168, 1898976, 1042000, 1020032, 569200, 1550896, 140656,
      276608, 990704, 543488, 444896, 664672, 1609088, 1225520, 417408,
      1898912, 532528, 149840, 1131056, 20448, 1360192, 622480, 1893952,
      1336464, 8048, 1073552, 969040, 720480, 1763248, 1749328, 804144,
      1677152, 1640112, 817600, 1629568, 1084192, 984784, 427120, 237744,
      801264, 1604720, 1725680, 722720, 1491248, 930512, 680064, 1866944,
      882208, 1262032, 1966192, 1056704, 1224752, 1378880, 114000, 1258432,
      1194816, 1169376, 186224, 90624, 242528, 11056, 526960, 800320, 1218448,
      97872, 139856, 81808, 1857008, 961904, 1448848, 1933296, 858224, 1674880,
      555200, 1875504, 774768, 2496, 532256, 1360016, 1639776, 153392, 242416,
      1071360, 1864528, 1076352, 472176, 1430480, 1111008, 1538176, 447984,
      940368, 1292704, 1336400, 1550368, 234448, 1397024, 1643904, 1219152,
      1590288, 1453568, 1578576, 1942368, 771696, 1672064, 861888, 1818368,
      805712, 1390176, 756336, 741712, 634896, 987152, 1302752, 1259392,
      809824, 469312, 1761344, 1837840, 1420064, 252848, 908400, 790416, 86544,
      1852192, 1307024 };

  int[] randomSequence16kb = { 62336, 712640, 448000, 605184, 409056, 1356864,
      1340128, 37632, 502560, 1827584, 186336, 587424, 479072, 1757728, 144896,
      1673568, 300288, 575104, 1883296, 28960, 248992, 586176, 1096096,
      1385312, 1557184, 879968, 1293376, 1087232, 1131008, 1280640, 522656,
      1811680, 100800, 1651744, 111808, 1742112, 175200, 1347776, 44448, 4992,
      535520, 1148992, 1627872, 1832736, 451296, 317760, 712512, 409248,
      225920, 1124896, 256800, 588192, 696256, 1373472, 1165632, 1468640,
      1619584, 1353632, 459840, 1753664, 34944, 837120, 322976, 1534496,
      1852960, 1640544, 1831776, 1243552, 1718080, 1143584, 1614656, 583296,
      1604224, 315968, 1614432, 567008, 68992, 1953728, 1403936, 1461312,
      1302976, 709632, 807008, 1347744, 1295296, 553376, 487936, 101952,
      1105184, 1619040, 482912, 1333088, 717568, 1006400, 1082880, 434752,
      48000, 267232, 1931264, 1203584, 1894272, 914336, 1654368, 1529792,
      17248, 795552, 1953952, 415392, 823328, 1490272, 1586976, 1903104,
      159936, 1255680, 666496, 1266208, 986368, 236672, 1698080, 667776,
      326336, 641792, 905312, 1703456, 1063392, 1874528, 182816, 1644864,
      1969728, 1565792, 796320, 995392, 919808, 139680, 1488800, 1646816,
      733568, 905792, 701184, 875392, 1406400, 860544, 1336672, 239488,
      1528672, 1311072, 1234304, 1617632, 445408, 669824, 1642464, 1337568,
      100000, 915968, 15360, 1925056, 1152960, 269408, 451360, 71936, 1455424,
      121728, 432768, 1873568, 1524288, 1760832, 264864, 1103616, 709856,
      1551008, 36064, 1705120, 1963520, 1006752, 1452704, 1326528, 845984,
      946272, 149792, 875296, 1485632, 1569696, 516864, 1968256, 997376,
      925760, 147136, 971328, 1741280, 1013408, 1651616, 929856, 863520,
      1306976, 439488, 1444608, 1398400, 798880, 1625696, 455424, 670624,
      642272, 318688, 68960, 787104, 1383168, 882240, 1118432, 1776320, 205440,
      1358592, 50240, 558240, 1139680, 1828736, 130784, 119360, 808032,
      1647392, 82112, 846336, 639296, 1655616, 1318432, 653312, 281792,
      1600288, 951232, 1748384, 1098112, 137248, 588800, 533184, 547552,
      1975456, 1876416, 1957632, 1855904, 838048, 1470688, 1306656, 1132192,
      944640, 468480, 1272928, 904128, 1753408, 347648, 1658464, 669920,
      907648, 356384, 224064, 1037824, 612832, 1600000, 1921920, 120224,
      367072, 383200, 1218272, 261792, 1027904, 1872576, 988672, 231616,
      976960, 1212704, 42112, 1881408, 1349472, 1307584, 1947072, 1858592,
      1954912, 657856, 215360, 808576, 418688, 118688, 809376, 1783680, 328928,
      944640, 1138816, 1962816, 20224, 26432, 1263232, 536448, 1883744,
      1028352, 1012160, 1291808, 431424, 283232, 1592096, 1934720, 983648,
      648352, 959264, 83520, 2144, 40768, 361952, 1195296, 1482656, 1480800,
      1708096, 94784, 1161856, 1521440, 1647392, 458080, 1083232, 1937760,
      584960, 245568, 812896, 933856, 1514368, 1002752, 1700128, 268768,
      801504, 1191136, 1385184, 1474144, 1056384, 1053632, 855584, 573376,
      1164288, 478496, 1492256, 618272, 109856, 1190528, 859744, 1452352,
      473056, 851104, 1522080, 1532000, 7520, 1505760, 370976, 1817632, 537248,
      1478784, 1306880, 1703680, 16448, 709440, 1279392, 721664, 415328,
      430400, 211552, 736928, 1470880, 463232, 1272384, 1303296, 958624,
      1359232, 131520, 1069920, 1835552, 963776, 1428352, 814240, 54368,
      1508416, 1843776, 38656, 1840704, 1696896, 1179040, 669280, 1334336,
      846112, 1577536, 684160, 177856, 1039136, 631552, 1767872, 1152096,
      1743424, 816736, 1620960, 892512, 92576, 570560, 1872384, 1361376,
      1173792, 1850272, 491584, 297440, 319776, 1664832, 1255744, 1694912,
      893504, 1707552, 1916800, 1575968, 289920, 1781504, 929888, 209280,
      153888, 231104, 728736, 573536, 1864000, 1496128, 962944, 596224,
      1525536, 1771072, 955456, 207136, 1084000, 1787456, 1186784, 1005056,
      894176, 435136, 1495424, 1296256, 1097216, 1661824, 537152, 1288768,
      663296, 1117728, 1164352, 910752, 1662336, 249184, 1632, 595520, 1911968,
      1163264, 1525824, 1841920, 934080, 60736, 102912, 1865024, 1774784,
      1915872, 696000, 894144, 1524672, 1973792, 1304256, 1769088, 157024,
      1058528, 1856288, 482144, 1491680, 1014976, 1009632, 1700576, 1957472,
      329952, 1657504, 461088, 1103872, 1880128, 204416, 447968, 1053824,
      1277856, 1909344, 596672, 1874592, 530880, 837536, 486624, 1293344,
      64288, 938272, 1698688, 1299680, 1615648, 795712, 1649376, 773344,
      106592, 874144, 378144, 923712, 1159008, 1226400, 1123616, 942400,
      1548480, 1140608, 736288, 1783456, 1632640, 735296, 664864, 660736,
      1535136, 1350400, 71328, 1541504, 452544, 1074176, 1581824, 460928,
      818592, 1039936, 1503328, 515456, 1319616, 1512224, 1228288, 568352,
      421408, 438016, 1604288, 1876736, 43488, 939552, 202784, 329792, 317024,
      491744, 661280, 470784, 160576, 1950816, 1959872, 1614720, 1447136,
      463424, 1384384, 838592, 437280, 1154688, 1334080, 1608064, 161824,
      137408, 1173888, 118368, 247712, 1482272, 1398656, 474560, 603072,
      513888, 703616, 1033984, 204512, 555264, 1024896, 1493664, 1535168,
      932064, 428416, 523744, 224320, 135936, 1076800, 1935456, 1095040,
      1824608, 1701696, 1286720, 360288, 389152, 1693984, 738240, 898656,
      397504, 1680896, 1500576, 1130112, 303456, 1811680, 511168, 1964736,
      701536, 221312, 74720, 1782784, 1609056, 674720, 662592, 458400, 1801024,
      1008384, 1534208, 1626368, 479904, 120544, 1616448, 935200, 1812832,
      105888, 1365728, 1201184, 1496352, 272768, 514400, 1454432, 1716384,
      196480, 930080, 243616, 966208, 1435488, 1601728, 1402816, 1610400,
      1164448, 863168, 1456800, 722048, 857952, 853600, 645920, 595360, 509024,
      1897888, 788032, 1268000, 954656, 427232, 181056, 35552, 527072, 1320736,
      1327168, 872992, 105152, 1761920, 1136608, 1107264, 782304, 240512,
      197408, 1460384, 1368864, 1673376, 432864, 26432, 299840, 1514304,
      1098016, 872992, 1211008, 1195968, 1886656, 500288, 558400, 287808,
      661920, 1763424, 327264, 660096, 943264, 1330976, 179456, 1835040,
      1816128, 1111744, 550944, 1916416, 44800, 1384640, 1295840, 956512,
      867968, 130336, 1795872, 634976, 1095712, 1659296, 1957472, 1051840,
      1050560, 366464, 1795392, 931744, 829440, 1402688, 633184, 660928,
      575904, 1486784, 1700192, 356480, 999840, 1698592, 1679008, 244992,
      805024, 1465984, 1627968, 138848, 634944, 293856, 1770976, 380736,
      220928, 692384, 1750688, 1036672, 1310944, 1927520, 614880, 1013248,
      1645632, 1070464, 1090336, 1652128, 1110048, 394240, 923744, 361152,
      897088, 517472, 632256, 1445632, 782816, 1927616, 1297632, 1423712,
      1318624, 151392, 1849472, 961568, 1379744, 792448, 959712, 1753952,
      1477184, 807936, 1392832, 1334144, 1744160, 1706912, 633344, 284128,
      285024, 1743200, 1704288, 455616, 637824, 932864, 581664, 4960, 948128,
      1538976, 208480, 1858496, 971104, 181344, 454336, 1496704, 730272,
      1324320, 1589408, 1401120, 585280, 289856, 1428032, 1178784, 16928,
      165696, 1631552, 1196416, 1732160, 1440800, 402784, 1265536, 600928,
      1792928, 261984, 1079040, 1189280, 346112, 530304, 481504, 1842048,
      1072480, 1955424, 1577088, 868480, 934272, 1158272, 524128, 1606304,
      772864, 418528, 1333888, 141376, 572128, 1836192, 1893152, 338784,
      1933216, 1376096, 307072, 349408, 574976, 827936, 1345056, 1443744,
      1916448, 751616, 697856, 1133568, 1377728, 1657824, 933088, 127008,
      704032, 204800, 1116992, 352544, 378944, 66944, 1380096, 697792, 1927360,
      967296, 736032, 1645472, 592704, 1746528, 1953952, 434944, 149440, 16320,
      1859840, 341472, 1551840, 869184, 1095936, 1409472, 406080, 1234944,
      50304, 1539904, 522464, 1645216, 634304, 1668320, 1594432, 1296864,
      1025152, 1055264, 551168, 1530272, 56160, 314400, 1258784, 1852992,
      915264, 39232, 1111872, 1519616, 302208, 249728, 1025184, 460384, 645312,
      1881600, 1834272, 662624, 310432, 445792, 144768, 510176, 1662816,
      1833248, 448352, 1030592, 430400, 1608640, 222272, 764032, 1758528,
      768352, 924032, 1587008, 1169408, 842592, 1043552, 1063296, 1109248,
      190528, 83776, 1883584, 459488, 798496, 946592, 174080, 31040, 681248,
      1833984, 641152, 837728, 235520, 1368480, 1404448, 1716768, 1460736,
      1649472, 1936320, 614720, 394624, 934432, 1205760, 115328, 401408,
      893472, 360224, 1672864, 305184, 819328, 1214624, 1430272, 883232,
      1313600, 545376, 1523776, 1172768, 1960192, 1493056, 212096, 1588512,
      1379904, 1220352, 252768, 1658752, 719808, 406272, 143392, 453440,
      1401984, 779936, 1851168, 1711008, 667424, 976000, 877696, 1700192,
      1022656, 191136, 1789600, 219552, 488096, 1111424, 1198560, 1752064,
      1117824, 1862464, 1028768, 1079968, 1189344, 1567008, 1501504, 552160,
      257600, 38624, 211456, 1476896, 713152, 103136, 430368, 1070144, 145920,
      1733056, 27040, 480768, 333728, 317440, 807616, 733600, 1302624, 1556736,
      1378464, 802016, 1336512, 36672, 1711744, 1824928, 576736 };

  int[] randomSequence32kb = { 355712, 409984, 1040896, 1673536, 364992,
      718400, 59840, 864448, 1648064, 845504, 1487552, 1527936, 1308352,
      1091136, 681664, 843328, 1487616, 1758656, 1273600, 339840, 1964672,
      1765312, 935360, 926720, 192384, 1125952, 1858304, 1880704, 1839296,
      1672064, 1630144, 618944, 764416, 1774784, 397376, 1484672, 766976,
      1280960, 1744704, 1619072, 1767808, 7360, 1343936, 296000, 516352,
      661760, 851456, 464256, 1703680, 447040, 1131520, 549952, 479936, 460864,
      1610304, 1579264, 540224, 1446336, 671360, 1686144, 1031616, 360768,
      374976, 925184, 1945536, 906496, 68864, 1898560, 536384, 708096, 186432,
      524736, 743552, 309312, 362048, 127808, 568000, 1926464, 615424, 53312,
      170176, 638464, 1825344, 1811072, 1004864, 1380160, 857856, 255104,
      1738368, 1955136, 655040, 1414208, 521536, 1866560, 367296, 1542464,
      983424, 256768, 1920832, 418432, 1869760, 832064, 985536, 29120, 376576,
      91200, 461440, 1663040, 1454720, 665920, 1385280, 29632, 1469312,
      1313344, 1922432, 589184, 387136, 1875072, 552512, 1506048, 1611520,
      744768, 1141312, 899584, 1165440, 615872, 519936, 1676416, 35072, 492992,
      1824320, 67392, 1809984, 1309248, 423744, 1043072, 1950464, 1705792,
      1019072, 401856, 193984, 353024, 782144, 1973504, 16064, 47424, 436672,
      280640, 280128, 1884224, 1898304, 1603776, 131136, 1442752, 1107072,
      1261376, 1936768, 1249856, 194496, 1635648, 1253760, 931456, 1480832,
      1214656, 1651648, 1395904, 604800, 344832, 224768, 1025600, 339136,
      674176, 1913024, 1651712, 941312, 1254016, 347776, 480640, 438336,
      1515328, 1061120, 1122496, 687488, 26368, 1349312, 1208000, 382528,
      926720, 1807424, 1364160, 1076288, 891712, 1246400, 917760, 264064,
      848384, 1353664, 247360, 607744, 116864, 1070912, 1458048, 1453312,
      238528, 9280, 316096, 199680, 63680, 593920, 1754688, 1698176, 1654208,
      1815616, 1536896, 1682048, 351296, 1261952, 1738496, 767616, 1739648,
      1010432, 1098688, 1840704, 492928, 41728, 376000, 901184, 776320,
      1429952, 336064, 886656, 1310080, 445824, 712000, 1887424, 1440512,
      1206400, 1795264, 1316736, 531968, 1953408, 273152, 1797760, 1885952,
      468864, 742784, 1873088, 1699840, 1126336, 1806336, 635392, 710080,
      1804928, 684352, 569152, 370880, 1894016, 1511232, 893184, 922688,
      359808, 464896, 943744, 1667072, 1249024, 1550720, 1067712, 176064,
      1475456, 340544, 1717760, 1730112, 495936, 48448, 1651840, 944576,
      300352, 1947392, 561792, 1005952, 276992, 1675904, 1186560, 702336,
      103168, 607680, 246080, 1931584, 27840, 1049024, 1204672, 919744, 725568,
      1144640, 1506944, 239040, 781312, 1317120, 211584, 1732416, 1241536,
      1343552, 1631872, 1173696, 68160, 440000, 1937984, 806912, 1115968,
      201792, 1412928, 394688, 1180608, 792896, 1512320, 724352, 925504,
      1587968, 587904, 451776, 116544, 479744, 375488, 1465408, 1810816,
      293376, 1024064, 1770688, 1622336, 1511936, 528576, 695680, 1726784,
      1522176, 179072, 1260672, 776704, 1314048, 602304, 1601792, 1891392,
      1973632, 1701312, 1674048, 1780352, 291456, 107648, 1521280, 597376,
      405312, 743808, 1362240, 971840, 390656, 1018880, 1803200, 1559360,
      1822528, 930688, 1594816, 1852032, 1121792, 1697152, 746496, 837760,
      276736, 87936, 1286912, 1603968, 1290496, 302976, 390848, 1382336,
      263360, 670784, 326208, 302848, 748608, 68160, 854208, 1609216, 528256,
      613248, 352000, 565504, 835136, 1852736, 714944, 802048, 303360, 1170752,
      1057856, 1514112, 642432, 1876480, 703808, 1915584, 601856, 1518784,
      8256, 745472, 213376, 1123776, 1622272, 1687936, 1234560, 1647488,
      928896, 1596352, 1214848, 456128, 1063872, 145984, 1219520, 1795200,
      1805568, 1779968, 1298624, 644608, 1744576, 1242432, 142656, 334080,
      659328, 484352, 1091648, 1946112, 1313088, 1544064, 513728, 975296,
      108672, 629888, 1568320, 1249536, 1818048, 1560064, 348288, 1540224,
      555200, 980480, 575040, 391296, 1025280, 464384, 919424, 1431360,
      1060672, 1065408, 662528, 1628864, 311936, 1236288, 233152, 716800,
      421568, 1041984, 706752, 468672, 1172672, 100352, 35648, 1466048,
      1163456, 873856, 1341120, 1737344, 809728, 774336, 1082752, 1029696,
      1208704, 420864, 1211008, 140480, 275840, 1305344, 636992, 145600,
      1887296, 1170752, 1648064, 247424, 1563968, 932160, 120192, 1240512,
      1161856, 485184, 1096896, 262272, 1959424, 198720, 564160, 1770432,
      26304, 188480, 123072, 1356544, 1242944, 1946048, 511232, 691520,
      1048704, 1172096, 26496, 672192, 1160128, 319040, 1542848, 63232,
      1830976, 424576, 1334016, 1162304, 468992, 843904, 1374784, 402368,
      730112, 734144, 361152, 905984, 295040, 1669248, 1488128, 1726080,
      1967936, 1505344, 707136, 108736, 929472, 740608, 1564800, 435072,
      502848, 1082816, 1644160, 1254208, 891648, 1616832, 1023168, 392576,
      624192, 1932864, 1122944, 1120768, 347136, 1134912, 229568, 1119680,
      505536, 1416320, 1384640, 990144, 1400320, 1186624, 949824, 42048,
      1268096, 1095104, 1697280, 1857216, 831936, 1601216, 150592, 906752,
      590272, 915072, 957824, 1443136, 1707072, 886912, 1743232, 663552,
      993280, 165696, 1736960, 507072, 1845312, 803072, 585536, 1895360,
      614976, 59904, 445184, 1379712, 1905856, 1519424, 197888, 1161408,
      1898880, 459584, 114048, 1609920, 1421760, 658944, 520320, 1535872,
      1257728, 563264, 141888, 912512, 1673280, 1298496, 456896, 485376,
      191616, 975040, 512832, 344896, 934208, 167872, 1431232, 1732544, 843328,
      1568192, 1604672, 645504, 1216768, 60672, 841280, 409024, 1212224, 34688,
      396032, 524032, 1137920, 292096, 1859200, 1794176, 351936, 856896,
      308928, 1901760, 1722560, 725248, 1792960, 306368, 1702976, 1423424,
      1072512, 323328, 706944, 126784, 475008, 1659776, 759552, 1099968,
      1531904, 1070400, 1382464, 1442752, 1240384, 333120, 1229440, 475264,
      802240, 1500352, 1429440, 859520, 114496, 364800, 1234240, 1917824,
      391296, 1078336, 1766016, 400448, 547648, 1190720, 1342272, 136128,
      538368, 261440, 585408, 370752, 374784, 1197888, 651904, 258112, 1246656,
      1734336, 775232, 1102400, 767232, 858368, 1873728, 831616, 861376,
      773760, 795584, 1304384, 1400960, 1141824, 341632, 334976, 402176,
      144512, 1273472, 1946304, 1125824, 1123712, 1522560, 1576000, 1612480,
      1870272, 1100288, 72896, 1542784, 570048, 540736, 1773632, 896320,
      1447872, 1345024, 944640, 1320256, 1824960, 1411968, 784064, 1302592,
      40128, 1336448, 531200, 1770752, 1965696, 1788352, 1514560, 270464,
      340160, 1625280, 1193472, 1219456, 1778944, 870912, 400832, 1772544,
      1575680, 1567680, 1898240, 137920, 1712896, 504512, 1111360, 949504,
      1756544, 8512, 1772928, 397888, 1781568, 685888, 1521152, 1434176,
      952448, 443392, 177920, 1021568, 1429312, 691456, 1005824, 54016,
      1970240, 870656, 1876160, 1301760, 984384, 769920, 1441984, 61824,
      1738048, 1801344, 926784, 929984, 994624, 760896, 133888, 1818752,
      146880, 473984, 584704, 1595200, 1168192, 1970560, 1431104, 224896,
      487872, 1151104, 145984, 1789440, 983936, 602304, 853376, 498304, 821248,
      1274048, 226368, 205312, 552128, 351872, 1889472, 549120, 556288, 673856,
      292032, 1761280, 1517568, 1606848, 425920, 1065280, 1721536, 1409088,
      291840, 1468160, 1025600, 587328, 1248000, 1078400, 1044672, 340544,
      1248640, 49664, 379392, 183552, 759168, 90624, 208384, 1476352, 1093888,
      801536, 1783424, 833152, 38848, 296896, 1300416, 1098496, 1946816,
      1193728, 1545024, 914304, 1006080, 1819776, 1633600, 1297792, 1845248,
      1425792, 577216, 1620352, 264256, 867776, 1948160, 283136, 94336,
      1668160, 259968, 1000064, 1493376, 1294016, 1308608, 810688, 1740352,
      310528, 1033856, 891200, 1922688, 1679936, 1272256, 639168, 134656, 9984,
      1673472, 861120, 230144, 1729024, 1909440, 330368, 1197760, 1600448,
      850688, 383744, 1382912, 17984, 803712, 122880, 763584, 928256, 1934208,
      138752, 580992, 1011968, 475712, 927040, 188288, 908416, 428608, 561472,
      1359808, 1401280, 1865856, 489472, 318400, 1257216, 711296, 250624,
      738752, 295744, 260736, 473344, 1216832, 1329664, 1747584, 873152,
      469824, 184768, 1013056, 1640640, 1869760, 392896, 264256, 940608,
      1801920, 1566720, 1356928, 1583360, 676288, 1218368, 1154560, 1677056,
      1563328, 430016, 1673408, 396416, 1502016, 603904, 1672384, 222592,
      1951040, 164608, 1131520, 1435328, 1090432, 1598720, 176064, 1508352,
      352384, 1041152, 635776, 1834880, 412800, 1167680, 459584, 341888,
      1682880, 911616, 812416, 492992, 1971776, 400704, 1817408, 404864,
      399488, 105024, 1650880, 1663808, 261824, 198016, 1070848, 1388096,
      599168, 482048, 915648, 1877248, 49024, 1400512, 1911680, 1078720,
      1531776, 1605696, 1563264, 1741568, 1289536, 1953408, 1781376, 1709056,
      819264, 766656, 242624, 350656, 1709184, 1021312, 904896, 762624,
      1807872, 221504, 95552, 1599488, 1547968, 368064, 912192, 1549376 };

  int[] randomSequence64kb = { 1334784, 1764992, 1960704, 1597952, 21376,
      591616, 1930880, 325376, 1345792, 1480064, 1333376, 1748736, 353536,
      1584384, 1617920, 307072, 246656, 1198848, 778368, 494848, 1117184,
      259840, 129920, 1187840, 219392, 204160, 1369088, 914432, 1670144,
      338688, 1625344, 1483776, 1225216, 1414144, 1625216, 900736, 1081984,
      1768832, 714496, 1900928, 1472000, 182016, 1183872, 645504, 753664,
      79104, 1170176, 1435136, 1183104, 1743232, 1437056, 1968640, 1009024,
      1342720, 573696, 731648, 552448, 1549312, 1415808, 1570304, 1444224,
      1064064, 1394176, 1150592, 331008, 1492480, 1171712, 12544, 1614720,
      916736, 1686656, 275072, 727808, 1576832, 1531904, 1847552, 42112,
      996352, 1672576, 1744128, 70016, 1852288, 889600, 1477888, 759552,
      370432, 724096, 1685504, 427392, 959232, 1070592, 493952, 146688,
      1781760, 208768, 1735040, 148224, 1562752, 714624, 1463296, 1065856,
      1896448, 1454720, 1024, 279040, 1740544, 1312128, 896, 765440, 1750272,
      1046144, 1791872, 1923712, 256896, 428672, 1807104, 1387008, 292608,
      1270272, 1545600, 292224, 1738240, 307328, 648960, 424192, 221312,
      137088, 783360, 1803520, 1436288, 575744, 1854336, 471424, 1421696,
      1961344, 1476096, 32896, 1155072, 1551232, 1020160, 909568, 1555712,
      1591040, 868608, 969600, 45440, 969856, 553984, 152064, 30336, 1819904,
      1857792, 127744, 1268096, 1699712, 868608, 706304, 1880320, 1567616,
      841472, 1211392, 303744, 1787904, 686976, 1548416, 216192, 60160,
      1666688, 1915008, 1844864, 1007360, 706304, 12928, 1469696, 744704,
      1323008, 309504, 1760384, 997632, 621824, 1114624, 1632896, 822144,
      138112, 144640, 1244544, 354304, 1295360, 1343744, 674432, 1133952,
      466432, 486400, 1856512, 626432, 778624, 489472, 940544, 1947392,
      1957376, 1656576, 1382912, 1403008, 117888, 973056, 127488, 1724928,
      1889792, 550016, 475648, 1270400, 1318656, 1481216, 321152, 1431424,
      1003008, 423296, 466304, 1607424, 975744, 740096, 854144, 518528,
      1094528, 1792384, 872320, 944896, 1592832, 985728, 1184000, 1072128,
      1747456, 608000, 1291520, 1487872, 430720, 1944320, 1402112, 1531904,
      298240, 1351296, 1523968, 1126912, 282240, 1904896, 1497728, 1966976,
      865920, 950656, 1824640, 1836928, 10496, 585472, 478848, 1715712,
      1582720, 1638528, 1316480, 1075328, 154368, 1772288, 1149056, 1566592,
      49408, 1951360, 1686400, 1601792, 1255808, 1871360, 1790848, 1747328,
      397056, 82688, 236544, 513920, 1404288, 1387904, 1501312, 1899904,
      1268224, 758784, 1098752, 565376, 1470976, 630528, 1260416, 1157888,
      703488, 295168, 262016, 829824, 493184, 196096, 19840, 1819648, 485504,
      508032, 1051264, 406144, 209664, 681984, 349440, 1550848, 1190528,
      807296, 252544, 611328, 414208, 782336, 1385088, 308992, 799104, 23424,
      898816, 133760, 1451776, 1624960, 788224, 552960, 236032, 1162368,
      1641984, 1594240, 583296, 528384, 833792, 1966848, 1191424, 88064,
      1531776, 591360, 317440, 1391360, 693888, 742272, 431360, 294016, 375936,
      721152, 1564160, 772096, 861440, 308224, 455808, 517504, 911360, 326528,
      1659392, 416640, 16000, 779008, 818560, 480128, 387328, 1746816, 309888,
      495744, 347648, 1029888, 720128, 888576, 1766784, 1309952, 140160,
      1421568, 567680, 1432704, 337024, 1101312, 1182848, 328320, 440576,
      97664, 199424, 468736, 325504, 1282176, 1014656, 1100160, 1811072,
      1250816, 288512, 1542272, 1867136, 156032, 1123968, 388864, 1478400,
      1831808, 330240, 29056, 1158656, 1833088, 1429632, 464000, 253440,
      1316992, 1754112, 1635584, 655104, 458624, 1293952, 600576, 1930112,
      1638528, 1140480, 568704, 1088896, 848896, 292096, 264320, 1808768,
      377984, 1797120, 1420288, 1279360, 249728, 69888, 1390976, 1058816,
      1022720, 1741952, 218752, 1431040, 1657216, 1241344, 1659264, 484608,
      537216, 1788288, 289408, 847616, 1815424, 1674240, 1473152, 1166208,
      1086720, 998144, 881024, 1835392, 1060096, 1305344, 1856640, 1312256,
      1922304, 1747840, 1239936, 1927168, 1227264, 319616, 1135616, 342912,
      443648, 715904, 1076736, 706688, 1429504, 699648, 1862272, 1222528,
      344576, 378624, 1176832, 1932800, 49664, 243584, 470272, 1736832, 91392,
      89856, 567168, 1630976, 1633920, 708864, 750464, 308352, 971264, 47488,
      391040, 737280, 1226368, 1862272, 1673600, 472320, 889344, 427392,
      220416, 58368, 1252096, 998912, 699904, 1383040, 1641088, 843264, 321152,
      1478656, 1682560, 864384, 1850368, 1279360, 119552, 216960, 131840,
      472192, 1509504, 1837952, 919808, 415872, 968320, 749440, 878976, 105088,
      1245696, 47872, 260224, 1893760, 1118080, 1479936, 1624576, 1172352,
      1277184, 1583616, 1891584, 1516160, 182272, 1962112, 686464, 1792384,
      941440, 1561984, 280576, 373120, 444544, 507776, 525440, 142720, 1108480,
      1460736, 996352, 936192, 143232, 645760, 977408, 1119488, 808704, 762496,
      192256, 970240, 1300224, 1214976, 1896960, 848384, 1019264, 954752,
      761856, 1915776, 1227392, 943232, 1837056, 20480, 414464, 5248, 1879552,
      1431296, 722176, 277888, 379264, 241664, 1495424, 1709312, 821120,
      1143552, 711808, 1440256, 1931904, 1923584, 322816, 260864, 1551616,
      1760512, 396160, 1172992, 791680, 1724672, 1005440, 403584, 1555712,
      1142144, 829440, 1833984, 55552, 548736, 476800, 860288, 195200, 376320,
      991616, 775040, 1158784, 1695744, 1413248, 449024, 1297536, 1404160,
      1236352, 1004032, 312064, 1465600, 640, 1920000, 620160, 1244672, 481408,
      1876736, 1211392, 687872, 1199488, 1797248, 329600, 41984, 876800,
      1488640, 1546752, 1863296, 467072, 305408, 1565440, 1579520, 1403392,
      1470976, 1608960, 1490944, 1870848, 869248, 1105408, 1402112, 194176,
      470656, 1026048, 1711616, 1656704, 856576, 490880, 1441280, 1665664,
      161536, 898048, 212352, 1442688, 711680, 237696, 999936, 199424, 1938304,
      1884032, 559104, 730880, 1408768, 978560, 354176, 1348480, 1165824,
      732416, 976768, 1609856, 580992, 647808, 267520, 1878912, 1652608,
      1375616, 27392, 1622016, 1966208, 289792, 1936384, 138368, 1941504,
      980736, 1627776, 218880, 500352, 1494912, 700544, 1776000, 156032,
      115840, 970496, 1031552, 1224832, 350848, 1796224, 906880, 1250944,
      1169152, 209024, 1163264, 872832, 1659904, 324736, 667776, 86272,
      1247872, 1301632, 204160, 30720, 291712, 128, 386944, 1505280, 123520,
      1266176, 1204352, 1952896, 1548288, 310144, 1187712, 1048832, 395008,
      1333120, 1966208, 236544, 1759488, 1543424, 465792, 698496, 573568,
      260352, 412160, 303488, 863872, 887808, 756736, 11136, 477696, 1095168,
      581632, 112128, 677632, 1851136, 903808, 541952, 379008, 895616, 1396608,
      1288576, 500992, 1851392, 1957504, 848896, 393216, 1726592, 641024,
      1588608, 1309056, 1975552, 1457152, 1113344, 1791360, 671616, 1530624,
      417792, 1414144, 1471872, 884096, 198656, 288768, 386944, 695424, 921856,
      1930624, 1800320, 1647232, 1629952, 3456, 821632, 889600, 1280000,
      1197952, 583936, 1804544, 727680, 1445120, 829184, 1791360, 1085056,
      1712896, 1572352, 1607168, 1243392, 86144, 1373056, 1606784, 1272576,
      1412224, 1402624, 1760384, 1585408, 715776, 771456, 712704, 986752,
      1888768, 72704, 212736, 1325056, 1151744, 1217280, 1969024, 1044352,
      765440, 213248, 925184, 365824, 746624, 620160, 359808, 375552, 1797760,
      731392, 1637248, 937344, 566144, 1591680, 108288, 407040, 50560, 193024,
      1743488, 916608, 453632, 384768, 1675008, 18176, 1431936, 364032,
      1370752, 402944, 452352, 1897216, 1579136, 678528, 1429120, 233984,
      1693312, 333952, 425856, 1739648, 374656, 441856, 1548928, 1246336,
      1325184, 488320, 513920, 22144, 1790080, 1250688, 715776, 1183104,
      1840640, 1818240, 1497216, 697088, 705792, 1344000, 605824, 1831552,
      1515008, 1100032, 843264, 1217024, 931072, 499328, 1676032, 1695232,
      3584, 1144192, 966656, 92928, 690176, 1104384, 923392, 1420288, 1836928,
      1521664, 979968, 1702272, 1442048, 1849600, 1659264, 1016448, 157568,
      1225600, 1600768, 1563008, 204416, 571904, 628480, 1393024, 1053696,
      1297152, 198144, 251264, 1033088, 520704, 1545088, 746752, 100480,
      1686528, 1140096, 251392, 313600, 1174016, 401920, 513792, 1208192,
      839296, 474496, 1695744, 1650176, 1710208, 1379712, 616832, 1470848,
      1303680, 1276928, 756608, 384384, 1323776, 153344, 1378432, 360704,
      1679360, 1667584, 331136, 917888, 201472, 569344, 1382528, 63488,
      1331328, 849408, 782848, 1782912, 86528, 1207680, 934144, 79744, 999040,
      596224, 257664, 381440, 816896, 414848, 217088, 146176, 676864, 882944,
      1817088, 615808, 456832, 1337472, 1219712, 1964672, 1643136, 680832,
      1748096, 187776, 667392, 1328768, 613120, 645760, 802304, 602496, 461184,
      966656, 765824, 1658240, 618624, 712448, 183040, 1339904, 1481216, 19072,
      797440, 645760, 1411840, 1086208, 333440, 1460224, 1467520, 242432,
      971904, 316800, 96896, 1289856, 1021824, 172288, 1289728 };

  int[] randomSequence128kb = { 1264640, 40960, 1318656, 556032, 251648,
      343040, 341248, 253440, 1160448, 805888, 15360, 785408, 104704, 1060608,
      1485824, 750080, 1003776, 398592, 1507328, 1090560, 1393664, 219904,
      373504, 1533952, 378112, 153088, 1654272, 776960, 1472512, 1763584,
      1786624, 1257984, 683776, 1443072, 227072, 1707520, 379648, 624384,
      1893632, 22016, 1125632, 1557504, 1464320, 1049856, 1456896, 1912064,
      1050368, 184320, 1381120, 1856768, 328704, 1004288, 1646592, 448512,
      1368320, 1755136, 508160, 630016, 176128, 289536, 951040, 1804032,
      1649152, 1030656, 883968, 79872, 393984, 907776, 1093120, 1658624,
      1496576, 17920, 933888, 1089536, 1407232, 262400, 608768, 1343232,
      893952, 848384, 591872, 69632, 376832, 147456, 17920, 1361920, 1498368,
      78592, 1402368, 1724928, 624384, 30720, 1262336, 445184, 1297920, 484352,
      410624, 526080, 677888, 265472, 1791232, 60416, 457728, 790016, 1252096,
      146944, 251392, 1026304, 1292288, 1006080, 173056, 221184, 718848,
      1032704, 336384, 546304, 12032, 1365504, 1836288, 1210624, 1656320,
      67072, 256000, 950272, 896768, 963328, 1344768, 449536, 1679360, 1539584,
      1778944, 995328, 819712, 1273600, 956672, 738304, 1683456, 638976,
      1022464, 810496, 1063424, 282368, 989440, 1838080, 998144, 684800,
      763136, 1150208, 1411584, 1838848, 1161472, 1667584, 1520896, 763904,
      1467136, 1801728, 201728, 1426944, 1619200, 412672, 1260800, 1126656,
      1119744, 1480704, 1116672, 543744, 1547008, 676096, 516352, 1255424,
      118784, 1961472, 1274112, 866560, 846080, 931584, 318464, 1665792,
      1679104, 1024768, 1800448, 1864704, 940288, 985856, 1172992, 1891840,
      1100544, 1471744, 736768, 684032, 169472, 1118976, 1869568, 1032192,
      27392, 220672, 717312, 123392, 1088000, 1833728, 368896, 1019648,
      1378816, 1626112, 1414144, 656128, 1275904, 754944, 269056, 1877504,
      1722112, 634112, 1347840, 760832, 1960704, 638208, 161536, 1376000,
      1385216, 600832, 629248, 685824, 992256, 191488, 906496, 60160, 1419008,
      1926656, 1613312, 1107200, 1103616, 1281536, 1269760, 552960, 1412864,
      1825280, 538880, 1068032, 415744, 1135104, 1653760, 696320, 1722368,
      1503232, 1327360, 759296, 655360, 893952, 1099264, 83968, 141568, 640000,
      1747200, 1344512, 1266944, 237824, 1611264, 488448, 1103872, 1486080,
      749312, 150016, 765952, 70656, 1128960, 1078016, 1491456, 671744,
      1271040, 1525504, 361984, 513280, 906240, 698624, 1508864, 825344,
      451328, 351488, 366592, 1837056, 1402112, 335104, 1711616, 1774336,
      1237248, 602880, 1794304, 1586176, 1092096, 1015552, 554240, 1456640,
      1251328, 1884672, 1412352, 1798400, 840192, 382720, 1809408, 1760512,
      608512, 798464, 1355776, 1464576, 213248, 1513984, 1082368, 256000,
      847360, 160000, 1148160, 1421824, 324096, 1103104, 1063680, 1105152,
      968448, 1390592, 1314560, 1320448, 1550592, 1894400, 1174784, 1179904,
      1132800, 655872, 1552384, 1568000, 644096, 195072, 954368, 590848,
      864512, 151296, 444928, 1176064, 1150208, 1790464, 1003776, 194304,
      58112, 1087744, 721152, 1577984, 1035776, 975360, 802048, 385536, 375808,
      1209344, 200448, 815872, 1587968, 1457152, 1615360, 1219584, 639744,
      273664, 1729792, 458496, 1447936, 962816, 916480, 270848, 1647616,
      1913088, 42496, 363520, 1659392, 872192, 1062912, 1741056, 1168896,
      520448, 1041920, 624896, 1404416, 1858816, 1188608, 1413888, 1340416,
      565248, 43264, 236800, 989696, 773376, 1259776, 1575424, 906496, 360960,
      459264, 85248, 1355264, 1631744, 166656, 1047040, 1673984, 620032,
      1525248, 1683968, 1904896, 1648640, 1306624, 1885696, 571392, 1893888,
      600832, 1480960, 484352, 421376, 851968, 1784832, 1590272, 598784,
      176640, 1537280, 1821440, 548352, 1836288, 1874944, 1429760, 1285120,
      1832448, 612096, 782592, 1726976, 176640, 265472, 1637376, 1296384,
      1148160, 1808896, 283136, 1203200, 16640, 1711872, 1659904, 55296,
      398848, 1259008, 1934848, 299008, 1274624, 741376, 1531136, 873984,
      395776, 1629184, 1752320, 1294592, 1376000, 39680, 1514496, 885248,
      853248, 1175296, 808704, 1337088, 1824768, 1301504, 96768, 407296,
      1645568, 551424, 1195776, 1063168, 297984, 190720, 334848, 1341440,
      249088, 1901056, 1796096, 244992, 1080320, 1368576, 1571584, 296448,
      1196800, 1370624, 888320, 500480, 1251328, 1899776, 540416, 1880320,
      520448, 773632, 718336, 136448, 1734144, 1565184, 81408, 621056, 1426688,
      974848, 959744, 1292800, 1114880, 570368, 1358080, 177664, 371712,
      1555200, 592896, 263936, 512000, 834560, 277248, 388096, 718080, 1778432,
      1357312, 653824, 159488, 1300480, 60672, 1516544, 1561600, 926464,
      308480, 1949184, 654080, 1818880, 1453056, 848640, 1115904, 185344,
      1870848, 1690368, 1958400, 216064, 691200, 594432, 731904, 898560,
      1772288, 1306624, 888832, 1972736, 1650688, 1751552, 1902080, 900608,
      1189120, 695040, 339200, 369408, 287232, 1774592, 687104, 1639424,
      1227776, 892928, 402944, 1403904, 679168, 816128, 446720, 1968128,
      1100288, 559104, 28672, 948736, 1727744, 1681664, 550400, 246272,
      1140992, 47616, 849152, 833792, 1887232, 1236736, 1621504, 1038080,
      968448, 1267968, 833024, 1021696, 1511680, 425216, 164864, 1920000,
      480000, 80128, 1906432, 1531392, 599552, 1416192, 645888, 1201664,
      746496, 1164544, 459264, 858368, 1359104, 1856256, 577024, 236544,
      1732096, 288000, 1885696, 175616, 740352, 726784, 1618688, 1503232,
      1899776, 978432, 907520, 1808384, 16128, 1897472, 110080, 538880,
      1647872, 1112832, 770304, 311040, 512, 1653760, 1868800, 475648, 139264,
      1452544, 1378304, 1435648, 1972992, 8704, 618752, 1463808, 979712,
      912640, 303872, 738560, 1437952, 919296, 1509888, 721920, 998656, 205312,
      818944, 1567232, 610816, 1416960, 1730048, 329472, 659968, 610816,
      1244416, 1710848, 764672, 1245952, 1911040, 1853952, 974848, 1070336,
      1628416, 27904, 924160, 561408, 473344, 269568, 1024512, 472576, 227584,
      1261312, 1355008, 1282304, 1325824, 1069568, 762112, 1258240, 1630208,
      250368, 1827072, 165120, 1935872, 397056, 1881088, 1484800, 1292032,
      185088, 1076736, 1531392, 437760, 1952768, 467200, 1688576, 780800,
      1021952, 1342208, 733440, 1462528, 1850624, 462848, 802048, 41728,
      1864448, 1035520, 490496, 691200, 25600, 700928, 121600, 135424, 1957632,
      1953280, 1026048, 984576, 354048, 1908736, 1707008, 647168, 805888,
      703488, 1932800, 1117440, 283648, 797952, 856320, 76800, 1039360,
      1802752, 503808, 1592832, 952832, 1158400, 81920, 368640, 1701120,
      1513472, 315392, 869632, 1582080, 1415680, 391680, 132096, 1902080,
      1754624, 1927936, 641536, 1171968, 1555968, 1938432, 741120, 3840,
      1621760, 716800, 1071360, 452864, 233984, 628736, 1912320, 116736,
      983808, 1454592, 929280, 449280, 291584, 423936, 1770240, 882432, 61184,
      1184256, 1470464, 1693440, 476416, 695296, 1342208, 1325824, 1124352,
      1809664, 1804544, 1772800, 18432, 433920, 280832, 1972224, 1708544,
      379904, 1453312, 1075968, 1771264, 917248, 794368, 831232, 1469184,
      1622528, 1771008, 1394944, 89600, 787200, 1766400, 943104, 729856,
      1191936, 1190400, 1662208, 1327616, 1580032, 993792, 684032, 641792,
      711936, 1943808, 299264, 1519616, 814848, 54016, 1931520, 1724928,
      1423104, 1288960, 796672, 341504, 616448, 985344, 103168, 1843456,
      1221632, 246784, 1327616, 174592, 624128, 1923072, 610048, 1845760,
      1036544, 274688, 321280, 851712, 299776, 608512, 273920, 853504, 639744,
      1396224, 840960, 674048, 445184, 1511424, 1366784, 1730816, 109824,
      1603584, 341760, 1761024, 5888, 1749760, 1183232, 1339904, 424960,
      1118720, 1646080, 1665024, 1037056, 161280, 152576, 1664512, 292352,
      760576, 1232640, 806912, 1345792, 1417472, 1773056, 211200, 66816, 82688,
      1457152, 1315328, 1131776, 321792, 1717760, 1922560, 1788672, 1617408,
      413952, 1651200, 1049600, 1382912, 1500672, 1208576, 1830144, 1306368,
      1602560, 466688, 1604864, 134400, 551936, 1325056, 1257472, 801792,
      1239296, 804352, 332032, 1942016, 671232, 348416, 1546240, 1104128,
      836096, 474624, 1921024, 1042432, 84736, 867328, 1363456, 1820928,
      470528, 1545984, 321536, 1364736, 1342464, 754176, 1128704, 1699584,
      142848, 1552128, 324352, 1974272, 625152, 760064, 1095680, 826368,
      608768, 683776, 1470976, 914176, 700672, 399616, 367360, 321536, 728320,
      1450240, 1134336, 1562112, 601344, 557312, 358912, 67584, 1344000,
      1483264, 492800, 1633024, 25344, 294400, 1635072, 451840, 1454848,
      695808, 1235200, 871936, 1309184, 1461248, 847104, 1577984, 1948928,
      1950976, 1571328, 224000, 951808, 1115392, 992768, 1085696, 585984,
      995840, 900608, 1217536, 1878016, 211456, 586752, 1441536, 1915136,
      1575168, 777728, 256000, 1690624, 1774592, 306432, 87552, 485632, 764928,
      123904, 777216, 1165312, 1133568, 112128, 60416, 915968, 506624, 887808,
      1253120, 1521664, 1649408, 771328, 795136, 676352 };

  // ---------------------------------------------------------------------------
  // ---------------------------------------------------------------------------

  public WriteBufferDeviceTest() {

    // create byte arrays with random values for all blocksizes.
    randomGenerator = new Random(System.currentTimeMillis());
    testDataBlock8kb = new byte[8 * 1024];
    randomGenerator.nextBytes(testDataBlock8kb);
    testDataBlock16kb = new byte[16 * 1024];
    randomGenerator.nextBytes(testDataBlock16kb);
    testDataBlock32kb = new byte[32 * 1024];
    randomGenerator.nextBytes(testDataBlock32kb);
    testDataBlock64kb = new byte[64 * 1024];
    randomGenerator.nextBytes(testDataBlock64kb);
    testDataBlock128kb = new byte[128 * 1024];
    randomGenerator.nextBytes(testDataBlock128kb);
  }

  @BeforeClass
  public static final void initialize() throws Exception {

  }

  @AfterClass
  public static final void close() throws Exception {

  }

  /**
   * Test write on the beginning of a Device.
   * 
   * @throws Exception
   *           These should never be thrown.
   */
  @Test
  public final void testReadWriteBeginning8kb() throws Exception {

    device = new WriteBufferDevice(new JSCSIDevice(TARGET_NAME));
    device.open();

    int writeBlockCount = 100;
    int blockFactor = testDataBlock8kb.length / device.getBlockSize();
    long address = 0;

    for (int i = 0; i < writeBlockCount; i++) {
      device.write(address + i * blockFactor, testDataBlock8kb);
    }
    device.close();
    device = new WriteBufferDevice(new JSCSIDevice(TARGET_NAME));
    device.open();
    for (int j = 0; j < writeBlockCount; j++) {
      byte[] result = new byte[testDataBlock8kb.length];
      device.read(address + j * blockFactor, result);
      for (int i = 0; i < testDataBlock8kb.length; i++) {
        assertEquals(result[i], testDataBlock8kb[i]);
      }
    }

    device.close();
  }

  /**
   * Test write on the beginning of a Device.
   * 
   * @throws Exception
   *           These should never be thrown.
   */
  @Test
  public final void testReadWriteBeginning64kb() throws Exception {

    device = new WriteBufferDevice(new JSCSIDevice(TARGET_NAME));
    device.open();

    int writeBlockCount = 100;
    int blockFactor = testDataBlock64kb.length / device.getBlockSize();
    long address = 0;

    for (int i = 0; i < writeBlockCount; i++) {
      device.write(address + i * blockFactor, testDataBlock64kb);
    }
    device.close();
    device = new WriteBufferDevice(new JSCSIDevice(TARGET_NAME));
    device.open();
    for (int j = 0; j < writeBlockCount; j++) {
      byte[] result = new byte[testDataBlock64kb.length];
      device.read(address + j * blockFactor, result);
      for (int i = 0; i < testDataBlock64kb.length; i++) {
        assertEquals(result[i], testDataBlock64kb[i]);
      }
    }

    device.close();
  }

}
